<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function runs the survival regression which is the concentration estimation method of WRTDS. 
It uses sample data from the data frame Sample. 
It does the estimation for a set of data points defined by two vectors: estPtYear and estPtLQ. 
It returns an array of results for the estimation points.  
The array returned contains yHat, SE and ConcHat (in that order). yHat is the expected value of log(concentration), SE is 
the standard error of log(concentration) and ConcHat is the expected value of concentration."><title>Run the weighted survival regression for a set of estimation points (defined by DecYear and Log(Q)) — runSurvReg • EGRET</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Run the weighted survival regression for a set of estimation points (defined by DecYear and Log(Q)) — runSurvReg"><meta property="og:description" content="This function runs the survival regression which is the concentration estimation method of WRTDS. 
It uses sample data from the data frame Sample. 
It does the estimation for a set of data points defined by two vectors: estPtYear and estPtLQ. 
It returns an array of results for the estimation points.  
The array returned contains yHat, SE and ConcHat (in that order). yHat is the expected value of log(concentration), SE is 
the standard error of log(concentration) and ConcHat is the expected value of concentration."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-53797708-7"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-53797708-7');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://www.usgs.gov/" class="external-link"><img src="logo.png" id="logo" alt="Home" style="padding: 0px 50px 0px 0px;"></a>
    <a class="navbar-brand me-2" href="../index.html">EGRET</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.0.7.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/Overview.html">Overview and Updates</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/EGRET.html">Introduction</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Function Help Pages</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Enhancements.html">Enhancements</a>
    <a class="dropdown-item" href="../articles/WRTDSK.html">WRTDS Kalman</a>
    <a class="dropdown-item" href="../articles/parallel.html">Running in Parallel</a>
    <a class="dropdown-item" href="../articles/rResid.html">Random Residuals</a>
    <a class="dropdown-item" href="../articles/SeasonalFraction.html">Seasonal Analysis</a>
    <a class="dropdown-item" href="../articles/streamflow_trend.html">Daily Streamflow Trends</a>
    <a class="dropdown-item" href="../articles/TrendsByMonth.html">Trends by month</a>
    <a class="dropdown-item" href="../articles/AlternativeQMethod.html">Alternative Q Method</a>
    <a class="dropdown-item" href="../articles/Annual_Hydrograph_Timing.html">Annual_Hydrograph_Timing</a>
    <a class="dropdown-item" href="../articles/units.html">Custom Units</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/References_WRTDS.html">Bibliograpy</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://code.usgs.gov/water/EGRET">
    <span class="fa fa-gitlab fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Run the weighted survival regression for a set of estimation points (defined by DecYear and Log(Q))</h1>
      <small class="dont-index">Source: <a href="https://github.com/USGS-R/EGRET/blob/HEAD/R/runSurvReg.R" class="external-link"><code>R/runSurvReg.R</code></a></small>
      <div class="d-none name"><code>runSurvReg.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function runs the survival regression which is the concentration estimation method of WRTDS. 
It uses sample data from the data frame Sample. 
It does the estimation for a set of data points defined by two vectors: estPtYear and estPtLQ. 
It returns an array of results for the estimation points.  
The array returned contains yHat, SE and ConcHat (in that order). yHat is the expected value of log(concentration), SE is 
the standard error of log(concentration) and ConcHat is the expected value of concentration.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">runSurvReg</span><span class="op">(</span><span class="va">estPtYear</span>, <span class="va">estPtLQ</span>, <span class="va">DecLow</span>, <span class="va">DecHigh</span>, <span class="va">Sample</span>, windowY <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  windowQ <span class="op">=</span> <span class="fl">2</span>, windowS <span class="op">=</span> <span class="fl">0.5</span>, minNumObs <span class="op">=</span> <span class="fl">100</span>, minNumUncen <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>, interactive <span class="op">=</span> <span class="cn">NULL</span>, edgeAdjust <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  run.parallel <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">run_WRTDS</span><span class="op">(</span><span class="va">estY</span>, <span class="va">estLQ</span>, <span class="va">localSample</span>, <span class="va">DecLow</span>, <span class="va">DecHigh</span>, <span class="va">minNumObs</span>, <span class="va">minNumUncen</span>,</span>
<span>  <span class="va">windowY</span>, <span class="va">windowQ</span>, <span class="va">windowS</span>, <span class="va">edgeAdjust</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>estPtYear</dt>
<dd><p>numeric vector of Decimal Year values at the estimation points</p></dd>


<dt>estPtLQ</dt>
<dd><p>numeric vector of ln(Q) values at the estimation points, must be the same length as estPtYear</p></dd>


<dt>DecLow</dt>
<dd><p>number specifying minimum decimal year (left edge of the estimated surfaces).</p></dd>


<dt>DecHigh</dt>
<dd><p>number specifying maximum decimal year (right edge of the estimated surfaces).</p></dd>


<dt>Sample</dt>
<dd><p>dataframe created for EGRET analysis</p></dd>


<dt>windowY</dt>
<dd><p>numeric specifying the half-window width in the time dimension, in units of years, default is 7</p></dd>


<dt>windowQ</dt>
<dd><p>numeric specifying the half-window width in the discharge dimension, units are natural log units, default is 2</p></dd>


<dt>windowS</dt>
<dd><p>numeric specifying the half-window with in the seasonal dimension, in units of years, default is 0.5</p></dd>


<dt>minNumObs</dt>
<dd><p>numeric specifying the miniumum number of observations required to run the weighted regression, default is 100</p></dd>


<dt>minNumUncen</dt>
<dd><p>numeric specifying the minimum number of uncensored observations to run the weighted regression, default is 50</p></dd>


<dt>verbose</dt>
<dd><p>logical specifying whether or not to display progress message</p></dd>


<dt>interactive</dt>
<dd><p>logical deprecated. Use 'verbose' instead</p></dd>


<dt>edgeAdjust</dt>
<dd><p>logical specifying whether to use the modified method for calculating the windows at the edge of the record.  The modified method tends to reduce curvature near the start and end of record.  Default is TRUE.</p></dd>


<dt>run.parallel</dt>
<dd><p>logical to run bootstrapping in parallel or not</p></dd>


<dt>estY</dt>
<dd><p>numeric decimal year values at the estimation point</p></dd>


<dt>estLQ</dt>
<dd><p>numeric ln(Q) values at the estimation point</p></dd>


<dt>localSample</dt>
<dd><p>"Sample" data frame from the eList.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>resultSurvReg numeric array containing the yHat, SE, and ConcHat values array dimensions are (numEstPts,3)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">eList</span> <span class="op">&lt;-</span> <span class="va">Choptank_eList</span></span></span>
<span class="r-in"><span><span class="va">estPtYear</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2001.0</span>,<span class="fl">2005.0</span>,<span class="fl">2009.0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">estPtLQ</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="getSample.html">getSample</a></span><span class="op">(</span><span class="va">eList</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">DecLow</span> <span class="op">&lt;-</span> <span class="va">Sample</span><span class="op">$</span><span class="va">DecYear</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">DecHigh</span> <span class="op">&lt;-</span> <span class="va">Sample</span><span class="op">$</span><span class="va">DecYear</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">Sample</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">resultSurvReg</span> <span class="op">&lt;-</span> <span class="fu">runSurvReg</span><span class="op">(</span><span class="va">estPtYear</span>,<span class="va">estPtLQ</span>,</span></span>
<span class="r-in"><span>                            <span class="va">DecLow</span>,<span class="va">DecHigh</span>,<span class="va">Sample</span>,</span></span>
<span class="r-in"><span>                            run.parallel <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Survival regression (% complete):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 	66 	</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Survival regression: Done</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer></footer></div> <!-- / div for your main content-->

<!-- BEGIN USGS Footer Template -->

<footer class="footer"><div class="tmp-container">
		<!-- .footer-wrap -->
			<!-- .footer-doi -->
			<div class="footer-doi">
				<!-- footer nav links -->
				<ul class="menu nav"><li class="first leaf menu-links menu-level-1"><a href="https://www.doi.gov/privacy" class="external-link">DOI Privacy Policy</a></li>
					<li class="leaf menu-links menu-level-1"><a href="https://www.usgs.gov/policies-and-notices" class="external-link">Legal</a></li>
					<li class="leaf menu-links menu-level-1"><a href="https://www.usgs.gov/accessibility-and-us-geological-survey" class="external-link">Accessibility</a></li>
					<li class="leaf menu-links menu-level-1"><a href="https://www.usgs.gov/sitemap" class="external-link">Site Map</a></li>
					<li class="last leaf menu-links menu-level-1"><a href="https://answers.usgs.gov/" class="external-link">Contact USGS</a></li>
				</ul><!--/ footer nav links --></div>
			<!-- /.footer-doi -->

			<hr><!-- .footer-utl-links --><div class="footer-doi">
			<ul class="menu nav"><li class="first leaf menu-links menu-level-1"><a href="https://www.doi.gov/" class="external-link">U.S. Department of the Interior</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.doioig.gov/" class="external-link">DOI Inspector General</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.whitehouse.gov/" class="external-link">White House</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.whitehouse.gov/omb/management/egov/" class="external-link">E-gov</a></li>
				<li class="leaf menu-links menu-level-1"><a href="https://www.doi.gov/pmb/eeo/no-fear-act" class="external-link">No Fear Act</a></li>
				<li class="last leaf menu-links menu-level-1"><a href="https://www.usgs.gov/about/organization/science-support/foia" class="external-link">FOIA</a></li>
			</ul></div>			
		<!-- /.footer-utl-links -->
		<!-- .footer-social-links -->
		<div class="footer-social-links">
			<ul class="social"><li class="follow">Follow</li>
				<li class="twitter">
					<a href="https://twitter.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-twitter-square"><span class="only">Twitter</span></i>
					</a>
				</li>
				<li class="facebook">
					<a href="https://facebook.com/usgeologicalsurvey" target="_blank" class="external-link">
						<i class="fa fa-facebook-square"><span class="only">Facebook</span></i>
					</a>
				</li>
				<li class="github">
					<a href="https://github.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-github"><span class="only">GitHub</span></i>
					</a>
				</li>
				<li class="flickr">
					<a href="https://flickr.com/usgeologicalsurvey" target="_blank" class="external-link">
						<i class="fa fa-flickr"><span class="only">Flickr</span></i>
					</a>
				</li>
				<li class="youtube">
					<a href="http://youtube.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-youtube-play"><span class="only">YouTube</span></i>
					</a>
				</li>
				<li class="instagram">
					<a href="https://instagram.com/usgs" target="_blank" class="external-link">
						<i class="fa fa-instagram"><span class="only">Instagram</span></i>
					</a>
				</li>
			</ul></div>
		<!-- /.footer-social-links -->
	</div>
		<!-- /.footer-wrap -->	
</footer><!-- END USGS Footer Template- --><!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKQR8KP" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
  
  </body><!-- closing div for body --></html>

