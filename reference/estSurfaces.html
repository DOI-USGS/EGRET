<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Estimate the three surfaces (for yHat, SE and ConcHat) as a function of DecYear and logQ and store in the three-dimensional object called surfaces — estSurfaces • EGRET</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Estimate the three surfaces (for yHat, SE and ConcHat) as a function of DecYear and logQ and store in the three-dimensional object called surfaces — estSurfaces" />
<meta property="og:description" content="This function uses weighted survival regression to estimate three surfaces that cover the complete range
of DecYear and log(Q) values in the Daily data set. 
These surfaces are:
  (1) is the estimated log concentration (yHat), 
  (2) is the estimated standard error (SE), 
  (3) is the estimated concentration (ConcHat). 
They are mapped as an array that covers the complete space of daily discharge and time. 
The first index is discharge, layed out in 14 equally spaced levels of log(Q).
The second index is time, layed out as 16 increments of the calendar year, starting January 1.
 It returns the 3 dimensional array called surfaces.
 This array will be used to estimate these 3 quantities for any given day in the daily values record." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-53797708-7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-53797708-7');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EGRET</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.0.4.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/EGRET.html">Introduction</a>
</li>
<li>
  <a href="../reference/index.html">Function Help Pages</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Enhancements.html">Enhancements</a>
    </li>
    <li>
      <a href="../articles/WRTDSK.html">WRTDS-K In Development</a>
    </li>
    <li>
      <a href="../articles/Making WRTDS_K flux estimates.html">WRTDS-K Blog Article</a>
    </li>
    <li>
      <a href="../articles/parallel.html">Running in Parallel</a>
    </li>
    <li>
      <a href="../articles/rResid.html">Random Residuals</a>
    </li>
    <li>
      <a href="../articles/SeasonalFraction.html">Seasonal Analysis</a>
    </li>
    <li>
      <a href="../articles/streamflow_trend.html">Daily Streamflow Trends</a>
    </li>
    <li>
      <a href="../articles/TrendsByMonth.html">Trends by month</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/References_WRTDS.html">Bibliograpy</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/USGS-R/EGRET">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimate the three surfaces (for yHat, SE and ConcHat) as a function of DecYear and logQ and store in the three-dimensional object called surfaces</h1>
    <small class="dont-index">Source: <a href='https://github.com/USGS-R/EGRET/blob/master/R/estSurfaces.R'><code>R/estSurfaces.R</code></a></small>
    <div class="hidden name"><code>estSurfaces.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function uses weighted survival regression to estimate three surfaces that cover the complete range
of DecYear and log(Q) values in the Daily data set. 
These surfaces are:
  (1) is the estimated log concentration (yHat), 
  (2) is the estimated standard error (SE), 
  (3) is the estimated concentration (ConcHat). 
They are mapped as an array that covers the complete space of daily discharge and time. 
The first index is discharge, layed out in 14 equally spaced levels of log(Q).
The second index is time, layed out as 16 increments of the calendar year, starting January 1.
 It returns the 3 dimensional array called surfaces.
 This array will be used to estimate these 3 quantities for any given day in the daily values record.</p>
    </div>

    <pre class="usage"><span class='fu'>estSurfaces</span>(<span class='kw'>eList</span>, surfaceStart = <span class='fl'>NA</span>, surfaceEnd = <span class='fl'>NA</span>, localSample = <span class='fl'>NA</span>,
  windowY = <span class='fl'>7</span>, windowQ = <span class='fl'>2</span>, windowS = <span class='fl'>0.5</span>, minNumObs = <span class='fl'>100</span>,
  minNumUncen = <span class='fl'>50</span>, edgeAdjust = <span class='fl'>TRUE</span>, verbose = <span class='fl'>TRUE</span>,
  interactive = <span class='kw'>NULL</span>, run.parallel = <span class='fl'>FALSE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>eList</th>
      <td><p>named list with at least the Sample and Daily dataframes</p></td>
    </tr>
    <tr>
      <th>surfaceStart</th>
      <td><p>Date object for start of surface slice (or character starting date for data retrieval in the form YYYY-MM-DD). Default is NA .</p></td>
    </tr>
    <tr>
      <th>surfaceEnd</th>
      <td><p>Date object for end of surface slice (or character starting date for data retrieval in the form YYYY-MM-DD). Default is NA .</p></td>
    </tr>
    <tr>
      <th>localSample</th>
      <td><p>data frame to override eList$Sample. Default is NA .</p></td>
    </tr>
    <tr>
      <th>windowY</th>
      <td><p>numeric specifying the half-window width in the time dimension, in units of years, default is 7</p></td>
    </tr>
    <tr>
      <th>windowQ</th>
      <td><p>numeric specifying the half-window width in the discharge dimension, units are natural log units, default is 2</p></td>
    </tr>
    <tr>
      <th>windowS</th>
      <td><p>numeric specifying the half-window with in the seasonal dimension, in units of years, default is 0.5</p></td>
    </tr>
    <tr>
      <th>minNumObs</th>
      <td><p>numeric specifying the miniumum number of observations required to run the weighted regression, default is 100</p></td>
    </tr>
    <tr>
      <th>minNumUncen</th>
      <td><p>numeric specifying the minimum number of uncensored observations to run the weighted regression, default is 50</p></td>
    </tr>
    <tr>
      <th>edgeAdjust</th>
      <td><p>logical specifying whether to use the modified method for calculating the windows at the edge of the record. Default is TRUE.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>logical specifying whether or not to display progress message</p></td>
    </tr>
    <tr>
      <th>interactive</th>
      <td><p>logical deprecated. Use 'verbose' instead</p></td>
    </tr>
    <tr>
      <th>run.parallel</th>
      <td><p>logical to run bootstrapping in parallel or not</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>surfaces array containing the three surfaces estimated, array is 3 dimensional</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>eList</span> <span class='op'>&lt;-</span> <span class='kw'>Choptank_eList</span>
<span class='co'># \donttest{</span>
<span class='kw'>surfaces</span> <span class='op'>&lt;-</span> <span class='fu'>estSurfaces</span>(<span class='kw'>eList</span>)</div><div class='output co'>#&gt; Survival regression (% complete):
#&gt; 0 	1 	2 	3 	4 	5 	6 	7 	8 	9 	10 	
#&gt; 11 	12 	13 	14 	15 	16 	17 	18 	19 	20 	
#&gt; 21 	22 	23 	24 	25 	26 	27 	28 	29 	30 	
#&gt; 31 	32 	33 	34 	35 	36 	37 	38 	39 	40 	
#&gt; 41 	42 	43 	44 	45 	46 	47 	48 	49 	50 	
#&gt; 51 	52 	53 	54 	55 	56 	57 	58 	59 	60 	
#&gt; 61 	62 	63 	64 	65 	66 	67 	68 	69 	70 	
#&gt; 71 	72 	73 	74 	75 	76 	77 	78 	79 	80 	
#&gt; 81 	82 	83 	84 	85 	86 	87 	88 	89 	90 	
#&gt; 91 	92 	93 	94 	95 	96 	97 	98 	99 	
#&gt; Survival regression: Done</div><div class='input'>
<span class='kw'>surfaceStart</span> <span class='op'>&lt;-</span> <span class='st'>"1984-10-01"</span>
<span class='kw'>surfaceEnd</span> <span class='op'>&lt;-</span> <span class='st'>"1986-09-30"</span>
<span class='kw'>surfaces_1</span> <span class='op'>&lt;-</span> <span class='fu'>estSurfaces</span>(<span class='kw'>eList</span>, <span class='kw'>surfaceStart</span>, <span class='kw'>surfaceEnd</span>)</div><div class='output co'>#&gt; Survival regression (% complete):
#&gt; 0 	1 	2 	3 	4 	5 	6 	7 	8 	9 	10 	
#&gt; 11 	12 	13 	14 	15 	16 	17 	18 	19 	20 	
#&gt; 21 	22 	23 	24 	25 	26 	27 	28 	29 	30 	
#&gt; 31 	32 	33 	34 	35 	36 	37 	38 	39 	40 	
#&gt; 41 	42 	43 	44 	45 	46 	47 	48 	49 	50 	
#&gt; 51 	52 	53 	54 	55 	56 	57 	58 	59 	60 	
#&gt; 61 	62 	63 	64 	65 	66 	67 	68 	69 	70 	
#&gt; 71 	72 	73 	74 	75 	76 	77 	78 	79 	80 	
#&gt; 81 	82 	83 	84 	85 	86 	87 	88 	89 	90 	
#&gt; 91 	92 	93 	94 	95 	96 	97 	98 	99 	
#&gt; Survival regression: Done</div><div class='input'>
<span class='kw'>wall_sample</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='kw'>eList</span><span class='op'>$</span><span class='kw'>Sample</span>, n=<span class='fl'>500</span>)

<span class='kw'>surface_wall</span> <span class='op'>&lt;-</span> <span class='fu'>estSurfaces</span>(<span class='kw'>eList</span>, localSample = <span class='kw'>wall_sample</span>)</div><div class='output co'>#&gt; Survival regression (% complete):
#&gt; 0 	1 	2 	3 	4 	5 	6 	7 	8 	9 	10 	
#&gt; 11 	12 	13 	14 	15 	16 	17 	18 	19 	20 	
#&gt; 21 	22 	23 	24 	25 	26 	27 	28 	29 	30 	
#&gt; 31 	32 	33 	34 	35 	36 	37 	38 	39 	40 	
#&gt; 41 	42 	43 	44 	45 	46 	47 	48 	49 	50 	
#&gt; 51 	52 	53 	54 	55 	56 	57 	58 	59 	60 	
#&gt; 61 	62 	63 	64 	65 	66 	67 	68 	69 	70 	
#&gt; 71 	72 	73 	74 	75 	76 	77 	78 	79 	80 	
#&gt; 81 	82 	83 	84 	85 	86 	87 	88 	89 	90 	
#&gt; 91 	92 	93 	94 	95 	96 	97 	98 	99 	
#&gt; Survival regression: Done</div><div class='input'>
<span class='co'># }</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Robert Hirsch, Laura DeCicco.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


