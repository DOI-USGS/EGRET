---
title: "Flexible Flow-Normalization"
author: "Robert M. Hirsch, Laura A. De Cicco"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  rmarkdown::html_vignette:
    fig_height: 7
    toc: yes
vignette: >
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteIndexEntry{Flexible Flow-Normalization}
  \usepackage[utf8]{inputenc}
---


```{r setup, include=FALSE, message=FALSE}
library(rmarkdown)
options(continue=" ")
options(width=60)
library(knitr)
library(EGRET)


```

# Introduction




```{r } 
library(EGRET)
eList <- Choptank_eList
eList <- setUpEstimation(eList)

nSegments <- 2
segStart <- c(1985,2000) #Sample start year for segments
segEnd <- c(2001,2010) #Sample end years for segments
dStart <- as.Date(c("1988-10-01","2002-05-15")) #Flow starting days
dEnd <- as.Date(c("1998-09-30","2009-09-30")) #Flow ending days
eList <- flexFN(eList,nSegments,segStart,segEnd,dStart,dEnd)

```


```{r fig.height=6, fig.width=8  }
library(lubridate)
plotFluxHist(eList)

if('segmentInfo' %in% names(attributes(eList$INFO))){
  segmentINFO <- attr(eList$INFO, "segmentInfo")
  
  for(i in 1:length(segmentINFO$dStart)){
    rect(decimal_date(segmentINFO$dStart)[i], par()$usr[3], 
         decimal_date(segmentINFO$dEnd)[i], par()$usr[4],
         col= "#FF003322")    
  }
  
  abline(v=segmentINFO$segStart, col="blue")
  abline(v=segmentINFO$segEnd-1, col="blue")

  legend("topleft", legend=c("Sample segment limits",
                             "Flow segment limits"),lwd=c(1,0),
         col=c("blue","#FF003322"),lty=c(1,0),pch=c(NA,15))
}


```


# Disclaimer
Software created by USGS employees along with contractors and grantees (unless specific stipulations are made in a contract or grant award) are to be released as Public Domain and free of copyright or license. Contributions of software components such as specific algorithms to existing software licensed through a third party are encouraged, but those contributions should be annotated as freely available in the Public Domain wherever possible. If USGS software uses existing licensed components, those licenses must be adhered to and redistributed.

Although this software has been used by the U.S. Geological Survey (USGS), no warranty, expressed or implied, is made by the USGS or the U.S. Government as to accuracy and functionality, nor shall the fact of distribution constitute any such warranty, and no responsibility is assumed by the USGS in connection therewith.